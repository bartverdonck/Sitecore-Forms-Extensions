!function(t){var a="unobtrusiveAjaxClick",e="unobtrusiveAjaxClickTarget",r="unobtrusiveValidation";function n(t,a){for(var e=window,r=(t||"").split(".");e&&r.length;)e=e[r.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function i(t){return"GET"===t||"POST"===t}function u(a,e){var r,u,o,d;(r=a.getAttribute("data-ajax-confirm"))&&!window.confirm(r)||(u=t(a.getAttribute("data-ajax-loading")),d=parseInt(a.getAttribute("data-ajax-loading-duration"),10)||0,t.extend(e,{type:a.getAttribute("data-ajax-method")||void 0,url:a.getAttribute("data-ajax-url")||void 0,cache:"true"===(a.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var e,r,s;return r=t,i(s=o)||r.setRequestHeader("X-HTTP-Method-Override",s),!1!==(e=n(a.getAttribute("data-ajax-begin"),["xhr"]).apply(a,arguments))&&u.show(d),e},complete:function(){u.hide(d),n(a.getAttribute("data-ajax-complete"),["xhr","status"]).apply(a,arguments)},success:function(e,r,i){var u,o,d;u=a,o=e,-1===(i.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(d=(u.getAttribute("data-ajax-mode")||"").toUpperCase(),t(u.getAttribute("data-ajax-update")).each(function(a,e){switch(d){case"BEFORE":t(e).prepend(o);break;case"AFTER":t(e).append(o);break;case"REPLACE-WITH":t(e).replaceWith(o);break;default:t(e).html(o)}})),n(a.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(a,arguments)},error:function(){n(a.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(a,arguments)}}),o=e.type.toUpperCase(),e.data instanceof FormData?(e.processData=!1,e.contentType=!1,e.data.append("X-Requested-With","XMLHttpRequest"),i(o)||(e.type="POST",e.data.append("X-HTTP-Method-Override",o))):(e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),i(o)||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:o}))),t.ajax(e))}t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),u(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(e){var r=e.target.name,n=t(e.target),i=t(n.parents("form")[0]),u=n.offset();i.data(a,[{name:r+".x",value:Math.round(e.pageX-u.left)},{name:r+".y",value:Math.round(e.pageY-u.top)}]),setTimeout(function(){i.removeData(a)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(r){var n=r.currentTarget.name,i=t(r.target),u=t(i.parents("form")[0]);u.data(a,n?[{name:n,value:r.currentTarget.value}]:[]),u.data(e,i),setTimeout(function(){u.removeData(a),u.removeData(e)},0)}),t(document).on("submit","form[data-ajax=true]",function(n){var i=t(this).data(a)||[],o=t(this).data(e),d=o&&(o.hasClass("cancel")||void 0!==o.attr("formnovalidate"));if(n.preventDefault(),d||(!(s=t(this).data(r))||!s.validate||s.validate())){var s,c;if(this.enctype&&"multipart/form-data"===this.enctype){c=new FormData(this);for(var p=0;p<i.length;p++)c.append(i[p].name,i[p].value)}else c=i.concat(t(this).serializeArray());u(this,{url:this.action,type:this.method||"GET",data:c})}})}(jQuery);